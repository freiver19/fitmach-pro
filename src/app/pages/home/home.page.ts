import { Component, OnInit } from '@angular/core'; import { OffersService } from '../../services/offers.service'; import { Router } from '@angular/router'; @Component({ selector:'app-home', templateUrl:'./home.page.html' }) export class HomePage implements OnInit{ offers:any[]=[]; markers:any[]=[]; constructor(private offersSvc:OffersService, private router:Router){} ngOnInit(){ this.offersSvc.getOffers().subscribe(list=>{ this.offers = list || []; this.markers = this.offers.map((o:any,i:number)=>({lat:o.lat||4.624335+(i*0.004), lng:o.lng||-74.063644+(i*0.004), title:o.title||o.mode})); }); } edit(o:any){ localStorage.setItem('editing_offer', JSON.stringify(o)); this.router.navigateByUrl('/publish'); } async remove(o:any){ if(confirm('Eliminar oferta?')) await this.offersSvc.deleteOffer(o.id); } }
