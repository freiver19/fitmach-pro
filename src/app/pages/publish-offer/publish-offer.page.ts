import { Component } from '@angular/core'; import { OffersService } from '../../services/offers.service'; import { Router } from '@angular/router'; @Component({ selector:'app-publish-offer', templateUrl:'./publish-offer.page.html' }) export class PublishOfferPage{ model:any={title:'', mode:'', location:'', price:0}; constructor(private offersSvc:OffersService, private router:Router){} ngOnInit(){ const ed = localStorage.getItem('editing_offer'); if(ed){ this.model = JSON.parse(ed); localStorage.removeItem('editing_offer'); } } async save(){ try{ if(this.model.id) await this.offersSvc.updateOffer(this.model.id, this.model); else await this.offersSvc.createOffer(this.model); this.router.navigateByUrl('/home'); }catch(e:any){ alert(e.message||'Error'); } } }
